{% extends "base.html" %}

{% block metatags %}
<title>Run | starCAT</title>
<meta name="description" content="Run starCAT">
{% endblock %}

{% block contents %}
<div class="container">
    <div>
        <ol class="breadcrumb small">
            <li class="breadcrumb-item"><a href="{{url_for('bl_home.index')}}">Home</a></li>
            <li class="breadcrumb-item active" aria-current="page">Run starCAT</li>
        </ol>
    </div>

    <p class="lead">To run starCAT from the web browser, first <a href="{{url_for('bl_register.register')}}">register</a> and input your username</br>
        and password. Then select a reference and upload your query data.</br></p>
    <form action="{{ url_for('bl_starcat.runstarcat') }}" method="post" enctype="multipart/form-data">
        <div class="form-group col-md-6">
            <label for="email">Email:</label>
            <input type="email" name="email" id="email" class="form-control" required>
        </div>
        <div class="form-group col-md-6">
            <label for="password">Password:</label>
            <input type="password" name="password" id="password" class="form-control" required>
        </div>
        <a href="{{url_for('bl_starcat.reset_request')}}">Forgot password?</a>
        </br>
        </br>
        <div class="form-group col-md-6">
            <label for="ref">Select a starCAT reference catalog:</label>
            <select name="ref" id="ref" class="form-control">
                {% for ref in references %}
                <option value="{{ ref }}" {% if ref == selected_ref %}selected{% endif %}>{{ ref }}</option>
                {% endfor %}
            </select>
        </div>    
        <div class="form-group col-md-6">
            <label for="file">Upload your data in .h5ad format. Please ensure the file size is less than 2 GB.</label>
            <input type="file" name="file" id="file" class="form-control" required>
        </div>
        <button type="submit" class="btn btn-primary mt-3">Upload</button>
    </form>
</div>
{% endblock %}